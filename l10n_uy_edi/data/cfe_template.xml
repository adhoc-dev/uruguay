<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- TODO KZ a futuro necesitamos ver de mejorar la forma en que creamos el cfe, en lugar de tener este archivo ver si podemos pasarle directamente el xds y solo el diccionario con los valores para que automaticamente cree el cfe segun dicho xsd y eliminamos este template por completo  -->

        <template id="cfe_template">
           <CFE xmlns="http://cfe.dgi.gub.uy" version="1.0">
            <t t-esc="'&lt;' + cfe_tag + '&gt;'"/>
                <Encabezado>
                    <IdDoc>
                        <TipoCFE t-esc="int(move.l10n_latam_document_type_id.code)"/>
                        <Serie t-if="IdDoc.get('Serie')" t-esc="IdDoc['Serie']"/>
                        <Nro t-if="IdDoc.get('NumeroCfe')" t-esc="IdDoc['NumeroCfe']"/>
                        <FchEmis t-esc="IdDoc['FchEmis']"/>
                        <!-- TODO KZ lo dejamos fijo por el momento, ver para implementar cuando tengamos un monotributo o iva minimo -->
                        <!-- <MntBruto>1</MntBruto> -->

                        <TipoTraslado t-if="IdDoc.get('TipoTraslado')" t-esc="IdDoc['TipoTraslado']"/>
                        <FmaPago t-if="IdDoc.get('FmaPago')" t-esc="IdDoc['FmaPago']"/>
                        <FchVenc t-if="IdDoc.get('FchVenc')" t-esc="IdDoc['FchVenc']"/>
                        <ClauVenta t-if="IdDoc.get('ClauVenta')" t-esc="IdDoc['ClauVenta']"/>
                        <ModVenta t-if="IdDoc.get('ModVenta')" t-esc="IdDoc['ModVenta']"/>
                        <ViaTransp t-if="IdDoc.get('ViaTransp')" t-esc="IdDoc['ViaTransp']"/>
                        <InfoAdicionalDoc t-if="IdDoc.get('InfoAdicionalDoc')" t-esc="IdDoc['InfoAdicionalDoc']"/>
                    </IdDoc>
<<<<<<< HEAD
                    <Emisor t-if="emisor">
                        <RUCEmisor t-esc="emisor['RUCEmisor']"/>
                        <RznSoc t-esc="emisor['RznSoc']"/>
                        <CdgDGISucur t-esc="emisor['CdgDGISucur']"/>
                        <DomFiscal t-esc="emisor['DomFiscal']"/>
                        <Ciudad t-esc="emisor['Ciudad']"/>
                        <Departamento t-esc="emisor['Departamento']"/>
                        <InfoAdicionalEmisor t-if="emisor.get('InfoAdicionalEmisor')" t-esc="emisor['InfoAdicionalEmisor']"/>
||||||| parent of 7d63004 (temp)
                    <Emisor>
                        <RUCEmisor t-esc="RUCEmisor"/>
                        <!-- TODO KZ company register name? -->
                        <RznSoc t-esc="move.company_id.name"/>

                        <!-- NOTA nosotros estamos reportando NomComercial pero Uruware no, ver si realmente es necesario o no si debemos quitarlo, revisar en DGI -->
                        <NomComercial t-esc="move.company_id.name"/>
                        <!-- <EmiSucursal>Central</EmiSucursal> es opcional para todos asi que mejor no lo pasamos -->
                        <CdgDGISucur t-esc="move.company_id.l10n_uy_dgi_house_code"/>
                        <!-- A48 -->
                        <!-- TODO KZ fix street2 -->
                        <DomFiscal t-esc="(move.company_id.street + (' ' + move.company_id.street or ''))[:70]"/>
                        <Ciudad t-esc="move.company_id.city"/>
                        <Departamento t-esc="move.company_id.state_id.name"/>
=======
                    <Emisor>
                        <RUCEmisor t-esc="RUCEmisor"/>
                        <!-- TODO KZ company register name? -->
                        <RznSoc t-esc="move.company_id.name"/>

                        <!-- NOTA nosotros estamos reportando NomComercial pero Uruware no, ver si realmente es necesario o no si debemos quitarlo, revisar en DGI -->
                        <NomComercial t-esc="move.company_id.name"/>
                        <!-- <EmiSucursal>Central</EmiSucursal> es opcional para todos asi que mejor no lo pasamos -->
                        <CdgDGISucur t-esc="move.company_id.l10n_uy_dgi_house_code"/>
                        <!-- A48 -->
                        <!-- TODO KZ fix street2 -->
                        <DomFiscal t-esc="(move.company_id.street + (' ' + move.company_id.street or ''))[:70]"/>
                        <Ciudad t-esc="move.company_id.city"/>
                        <Departamento t-esc="move.company_id.state_id.name"/>
                        <InfoAdicionalEmisor t-if="emisor.get('InfoAdicionalEmisor')" t-esc="emisor['InfoAdicionalEmisor']"/>
>>>>>>> 7d63004 (temp)
                    </Emisor>
                    <Receptor t-if="receptor">
                        <TipoDocRecep t-esc="receptor['TipoDocRecep']"/>
                        <CodPaisRecep t-esc="receptor['CodPaisRecep']"/>
                        <DocRecep t-if="receptor.get('DocRecep')" t-esc="receptor['DocRecep']"/>
                        <DocRecepExt t-if="receptor.get('DocRecepExt')" t-esc="receptor['DocRecepExt']"/>
                        <RznSocRecep t-if="receptor.get('RznSocRecep')" t-esc="receptor['RznSocRecep']"/>
                        <DirRecep t-if="receptor.get('DirRecep')" t-esc="receptor['DirRecep']"/>
                        <CiudadRecep t-if="receptor.get('CiudadRecep')" t-esc="receptor['CiudadRecep']"/>
                        <DeptoRecep t-if="receptor.get('DeptoRecep')" t-esc="receptor['DeptoRecep']"/>
                        <PaisRecep t-if="receptor.get('PaisRecep')" t-esc="receptor['PaisRecep']"/>
<<<<<<< HEAD
                        <InfoAdicional  t-if="receptor.get('InfoAdicional')" t-esc="receptor['InfoAdicional']"/>
                        <LugarDestEnt t-if="receptor.get('LugarDestEnt')" t-esc="receptor['LugarDestEnt']"/>
                        <CompraID t-if="receptor.get('CompraID')" t-esc="receptor['CompraID']"/>
||||||| parent of 7d63004 (temp)
=======
                        <InfoAdicional  t-if="receptor.get('InfoAdicional')" t-esc="receptor['InfoAdicional']"/>
>>>>>>> 7d63004 (temp)
                    </Receptor>
                    <Totales>
                        <TpoMoneda t-if="totals_detail.get('TpoMoneda')" t-esc="totals_detail['TpoMoneda']"/>
                        <TpoCambio t-if="totals_detail.get('TpoCambio')" t-esc="totals_detail['TpoCambio']"/>
                        <MntNoGrv t-if="totals_detail.get('MntNoGrv')" t-esc="totals_detail['MntNoGrv']"/>
                        <MntExpoyAsim t-if="totals_detail.get('MntExpoyAsim')" t-esc="totals_detail['MntExpoyAsim']"/>

                        <MntNetoIvaTasaMin t-if="totals_detail.get('MntNetoIvaTasaMin')" t-esc="totals_detail['MntNetoIvaTasaMin']"/>
                        <MntNetoIVATasaBasica t-if="totals_detail.get('MntNetoIVATasaBasica')" t-esc="totals_detail['MntNetoIVATasaBasica']"/>

                        <IVATasaMin t-if="totals_detail.get('IVATasaMin')" t-esc="totals_detail['IVATasaMin']"/>
                        <IVATasaBasica t-if="totals_detail.get('IVATasaBasica')"  t-esc="totals_detail['IVATasaBasica']"/>

                        <MntIVATasaMin t-if="totals_detail.get('MntIVATasaMin')" t-esc="totals_detail['MntIVATasaMin']"/>
                        <MntIVATasaBasica t-if="totals_detail.get('MntIVATasaBasica')" t-esc="totals_detail['MntIVATasaBasica']"/>

                        <MntTotal t-if="totals_detail.get('MntTotal')" t-esc="totals_detail['MntTotal']"/>
                        <CantLinDet t-esc="totals_detail['CantLinDet']"/>
                        <MntPagar t-if="totals_detail.get('MntPagar')"  t-esc="totals_detail['MntPagar']"/>
                    </Totales>
                </Encabezado>
                <Detalle>
                    <Item t-foreach="item_detail" t-as="item_line">
                        <NroLinDet t-esc="item_line['NroLinDet']"/>
                        <IndFact t-if="item_line.get('IndFact')" t-esc="item_line['IndFact']"/>
                        <NomItem t-esc="item_line['NomItem']"/>
                        <DscItem t-if="item_line.get('DscItem')" t-esc="item_line['DscItem']"/>
                        <Cantidad t-esc="item_line['Cantidad']"/>
                        <UniMed t-esc="item_line['UniMed']"/>
                        <PrecioUnitario t-if="item_line.get('PrecioUnitario')" t-esc="item_line['PrecioUnitario']"/>
                        <MontoItem t-esc="item_line['MontoItem']"/>
                    </Item>
                </Detalle>
                <Referencia t-if="referencia_lines">
                    <Referencia t-foreach="referencia_lines" t-as="referencia">
                        <NroLinRef t-esc="referencia['NroLinRef']"/>
                        <TpoDocRef t-esc="referencia['TpoDocRef']"/>
                        <Serie t-esc="referencia['Serie']"/>
                        <NroCFERef t-esc="referencia['NroCFERef']"/>
                        <!-- <FechaCFEref t-esc="referencia['FechaCFEref']"/> -->
                    </Referencia>
                </Referencia>
            <t t-esc="'&lt;/' + cfe_tag + '&gt;'"/>
            </CFE>
        </template>
    </data>
</odoo>
